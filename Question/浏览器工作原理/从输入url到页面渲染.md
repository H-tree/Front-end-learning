# 从输入URL到页面展示
## 用户输入
### 判断输入内容
如果是搜索内容则结合搜索引擎合成新的URL,如果是网址(谷歌浏览器)则默认添加协议https,如果不支持则会使用http
### 跳转前停留
触发beforeunload事件,提示是否离开该页面
## URL请求过程
### 获取IP
浏览器进程通过进程间通信(IPC)把URL请求发送到网络进程
网络进程会查找本地是否有缓存，如果有则直接返回给浏览器进程,没有则进行DNS解析获取服务器的IP地址,如果是HTTPS还需要建立TLS连接
### 建立连接
#### 发送请求
TCP进行三次握手，构建请求行，请求头等信息，并把和该域名相关的Cookie等数据附加到请求头中,
#### 响应请求
服务器接收到请求信息后，生成响应数据，发给网络进程
#### 解析响应头
在接收到服务器返回的响应头后，网络进程开始解析响应头，如果状态码是301或302则需要重定向，从Location字段读取重定向地址
#### 处理响应数据
根据响应头的Content-Type字段来进行处理，如果是application/octet-stream则按照下载类型处理提交给浏览器的下载管理器,如果是text/html类型则进行页面渲染
## 页面渲染
同个站点(根域名和协议相同)使用同一个渲染进程;
当渲染器进程文档数据传输完成之后，会返回"确认提交"的消息给浏览器进程，
浏览器进程更新界面状态.
### 构建DOM树
HTML解析器随着HTML文档边加载边解析
#### 分词
通过分词器将字节流转换为Token,分为Tag Token和文本Token,Tag Token又分为StartTag和EndTag,
创建一个根为document的空DOM结构,将StartTage入栈并创建DOM节点，遇到EndTag则会判断当前栈顶是否是StartTage,如果是则把StartTag出栈，如果是文本节点则不需要入栈
